{% extends "base.html" %}
{% block title %}Statistics - SCE Request Portal{% endblock %}

{% block content %}
<div style="margin-bottom: 1rem;">
    <a href="{% url 'head_of_dept:dashboard' %}" class="btn btn-outline">‚Üê Back to Dashboard</a>
</div>

<h1 style="margin-bottom: 1.5rem;">Request Statistics</h1>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ total }}</div>
        <div class="stat-label">Total Requests</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: #f59e0b;">{{ pending }}</div>
        <div class="stat-label">Pending Final Approval</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: #3b82f6;">{{ in_progress }}</div>
        <div class="stat-label">In Progress</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: #10b981;">{{ approved }}</div>
        <div class="stat-label">Approved</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: #ef4444;">{{ rejected }}</div>
        <div class="stat-label">Rejected</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ processed }}</div>
        <div class="stat-label">Processed</div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Approval Rates</h2>
    </div>
    <div style="display: flex; gap: 3rem; align-items: center; margin-top: 1rem;">
        <div>
            <div style="font-size: 3rem; font-weight: bold; color: #10b981;">{{ approval_rate }}%</div>
            <div style="color: #6b7280;">Approval Rate</div>
        </div>
        <div>
            <div style="font-size: 3rem; font-weight: bold; color: #ef4444;">{{ rejection_rate }}%</div>
            <div style="color: #6b7280;">Rejection Rate</div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Statistics by Request Type</h2>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>Request Type</th>
                <th>Total</th>
                <th>Pending</th>
                <th>Approved</th>
                <th>Rejected</th>
                <th>Approval Rate</th>
            </tr>
        </thead>
        <tbody>
            {% for type, stats in type_stats.items %}
            <tr>
                <td><strong>{{ stats.label }}</strong></td>
                <td>{{ stats.total }}</td>
                <td>{{ stats.pending }}</td>
                <td style="color: #10b981;">{{ stats.approved }}</td>
                <td style="color: #ef4444;">{{ stats.rejected }}</td>
                <td>{{ stats.approval_rate }}%</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
